# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a web scraper for Panama's voter verification system. It automates the consultation of voter information from https://verificate.votopanama.net/ using Node.js and Puppeteer.

## Commands

### Development and Testing
- `npm install` - Install dependencies (puppeteer and csv-writer)
- `npm start` - Run the scraper with default configuration
- `node scraper.js` - Alternative way to run the scraper

### No test suite is currently configured

## Architecture

This is a single-file Node.js application with the following key components:

### Core Files
- `scraper.js` - Main application file containing all functionality
- `package.json` - Node.js dependencies and scripts
- `cedulas.txt` - Input file containing ID numbers (c√©dulas) to process
- `resultados_cedulas.csv` - Output file generated by the scraper

### Key Functions
- `consultarCedula(page, cedula)` - Core scraping function that extracts voter data from the website
- `procesarCedulas(listaCedulas)` - Main processing loop that handles multiple ID queries
- `formatearFecha(fecha)` - Date formatter that converts DD/MM/YYYY to DD-MMM-YYYY format
- `leerCedulasDesdeArchivo(rutaArchivo)` - File reader for processing ID numbers from text file

### Configuration Options
The scraper can be configured in two ways:
1. **Manual list**: Edit `listaCedulasManual` array in scraper.js:line_246
2. **File input**: Uncomment line 254 to read from cedulas.txt

### Browser Configuration
- Puppeteer runs in non-headless mode by default (`headless: false`)
- 2-second delays between queries to avoid server overload
- Handles timeouts and network errors gracefully

### Data Structure
Extracts and exports these fields to CSV:
- CEDULA, NOMBRE, FECHA_NACIMIENTO, EDAD, SEXO
- PROVINCIA, DISTRITO, CORREGIMIENTO 
- CENTRO_VOTACION, MESA

### Error Handling
- Failed queries are logged as "ERROR - NO ENCONTRADO" in the CSV
- Progress tracking shows successful vs failed queries
- Graceful handling of network timeouts and selector failures